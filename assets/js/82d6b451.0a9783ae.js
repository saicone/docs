"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9467],{7746:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>m,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"rtag/guides/custom-items","title":"Custom items","description":"Guide to create basic custom items with Rtag","source":"@site/docs/rtag/guides/custom-items.md","sourceDirName":"rtag/guides","slug":"/rtag/guides/custom-items","permalink":"/rtag/guides/custom-items","draft":false,"unlisted":false,"editUrl":"https://github.com/saicone/rtag/blob/main/docs/default/guides/custom-items.md","tags":[],"version":"current","lastUpdatedBy":"Rub\xe9n","lastUpdatedAt":1750374604000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Custom items","description":"Guide to create basic custom items with Rtag"},"sidebar":"rtag","previous":{"title":"Guides","permalink":"/rtag/guides/"},"next":{"title":"Save items data","permalink":"/rtag/guides/save-items"}}');var i=n(4848),s=n(8453);const r={sidebar_position:1,title:"Custom items",description:"Guide to create basic custom items with Rtag"},m=void 0,o={},c=[{value:"Simple data",id:"simple-data",level:2},{value:"Vouchers",id:"vouchers",level:3},{value:"Number count",id:"number-count",level:3},{value:"Item owner",id:"item-owner",level:3},{value:"Interactions",id:"interactions",level:2},{value:"Save item on death",id:"save-item-on-death",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Let's talk about real examples with item and custom NBT."}),"\n",(0,i.jsx)(t.h2,{id:"simple-data",children:"Simple data"}),"\n",(0,i.jsx)(t.p,{children:"Make simple items with NBT data."}),"\n",(0,i.jsx)(t.h3,{id:"vouchers",children:"Vouchers"}),"\n",(0,i.jsx)(t.p,{children:"Save voucher information inside item tag instead of comparing it with a large amount of items."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'private Map<String, List<String>> vouchers = new HashMap();\n\npublic ItemStack setVoucher(ItemStack item, String voucherId) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(voucherId, "voucher");\n\t});\n}\n\npublic String getVoucherId(ItemStack item) {\n\treturn new RtagItem(item).get("voucher");\n}\n\npublic boolean handleVoucher(Player player, ItemStack item) {\n\tfinal String id = getVoucherId(item);\n\tif (id == null || !vouchers.containsKey(id)) {\n\t\treturn false;\n\t}\n\tfor (String cmd : vouchers.get(id)) {\n\t\tBukkit.dispatchCommand(Bukkit.getConsoleSender(), cmd.replace("%player%", player.getName));\n\t}\n\treturn true;\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"number-count",children:"Number count"}),"\n",(0,i.jsx)(t.p,{children:"Count some number inside item tag."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack addCount(ItemStack item, int amount) {\n\treturn RtagItem.edit(item, tag -> {\n\t\tint i = tag.getOptional("myplugin", "count").or(0);\n\t\ti = i + amount;\n\t\ttag.set(i, "myplugin", "count");\n\t});\n}\n\npublic int getCount(ItemStack item) {\n\treturn new RtagItem(item).getOptional("myplugin", "count").or(0);\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"item-owner",children:"Item owner"}),"\n",(0,i.jsx)(t.p,{children:"Save item owner as custom tag."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack setOwner(ItemStack item, OfflinePlayer player) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(player.getName(), "owner", "name");\n\t\ttag.set(player.getUniqueId(), "owner", "uuid");\n\t});\n}\n\npublic String getOwnerName(ItemStack item) {\n\treturn new RtagItem(item).get("owner", "name");\n}\n\npublic UUID getOwnerUuid(ItemStack item) {\n\treturn new RtagItem(item).getOptional("owner", "uuid").asUuid();\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"interactions",children:"Interactions"}),"\n",(0,i.jsx)(t.p,{children:"Modify item interactions using NBT data and event handling."}),"\n",(0,i.jsx)(t.h3,{id:"save-item-on-death",children:"Save item on death"}),"\n",(0,i.jsxs)(t.p,{children:["Let's make a custom tag like ",(0,i.jsx)(t.code,{children:"keepItem"}),", set to ",(0,i.jsx)(t.code,{children:"true"})," to save that item on death."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack setKeepItem(ItemStack item, boolean value) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(value, "keepItem");\n\t});\n}\n\npublic boolean keepItem(ItemStack item) {\n\treturn new RtagItem(item).getOptional("keepItem").or(false);\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["And handle it with ",(0,i.jsx)(t.code,{children:"PlayerDeathEvent"})," and ",(0,i.jsx)(t.code,{children:"PlayerRespawnEvent"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"private final Map<String, List<ItemStack>> savedItems = new HashMap<>();\n\n@EventHandler\npublic void onDeath(PlayerDeathEvent e) {\n\tif (e.getKeepInventory()) {\n\t\treturn;\n\t}\n\n\tList<ItemStack> matches = new ArrayList<>();\n\te.getDrops().forEach(item -> {\n\t    if (keepItem(item)) {\n\t        matches.add(item);\n\t    }\n\t});\n\n\tif (matches.isEmpty()) {\n\t\treturn;\n\t}\n\n\tString name = e.getEntity().getName();\n\tif (savedItems.containsKey(name)) {\n\t    savedItems.get(name).addAll(matches);\n\t} else {\n\t    savedItems.put(name, matches);\n\t}\n\n\te.getDrops().removeAll(matches);\n}\n\n@EventHandler\npublic void onRespawn(PlayerRespawnEvent e) {\n\tString name = e.getPlayer().getName();\n\tif (savedItems.containsKey(name)) {\n\t\te.getPlayer().getInventory().addItem(savedItems.get(name).toArray(new ItemStack[0]));\n\t\tsavedItems.remove(name);\n\t}\n}\n"})})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>m});var a=n(6540);const i={},s=a.createContext(i);function r(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function m(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);