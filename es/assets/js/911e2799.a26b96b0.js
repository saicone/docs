"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6540],{1235:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>a,toc:()=>m});const a=JSON.parse('{"id":"rtag/guides/custom-items","title":"Items custom","description":"Gu\xeda b\xe1sica para crear items custom con Rtag","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/rtag/guides/custom-items.md","sourceDirName":"rtag/guides","slug":"/rtag/guides/custom-items","permalink":"/es/rtag/guides/custom-items","draft":false,"unlisted":false,"editUrl":"https://github.com/saicone/rtag/blob/main/docs/es/guides/custom-items.md","tags":[],"version":"current","lastUpdatedBy":"github-actions[bot]","lastUpdatedAt":1755644860000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Items custom","description":"Gu\xeda b\xe1sica para crear items custom con Rtag"},"sidebar":"rtag","previous":{"title":"Gu\xedas","permalink":"/es/rtag/guides/"},"next":{"title":"Guardar data de items","permalink":"/es/rtag/guides/save-items"}}');var i=n(4848),r=n(8453);const s={sidebar_position:1,title:"Items custom",description:"Gu\xeda b\xe1sica para crear items custom con Rtag"},o=void 0,c={},m=[{value:"Data simple",id:"data-simple",level:2},{value:"Vouchers",id:"vouchers",level:3},{value:"Conteo de n\xfamero",id:"conteo-de-n\xfamero",level:3},{value:"Due\xf1o del item",id:"due\xf1o-del-item",level:3},{value:"Interacciones",id:"interacciones",level:2},{value:"Guardar item al morir",id:"guardar-item-al-morir",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Vamos a hablar de ejemplos reales con items y NBT custom."}),"\n",(0,i.jsx)(t.h2,{id:"data-simple",children:"Data simple"}),"\n",(0,i.jsx)(t.p,{children:"Hacer items simples con data NBT."}),"\n",(0,i.jsx)(t.h3,{id:"vouchers",children:"Vouchers"}),"\n",(0,i.jsx)(t.p,{children:"Guardar la informaci\xf3n de un voucher dentro del tag de un item, env\xe9s de compararlo con una larga cantidad de items."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'private Map<String, List<String>> vouchers = new HashMap();\n\npublic ItemStack setVoucher(ItemStack item, String voucherId) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(voucherId, "voucher");\n\t});\n}\n\npublic String getVoucherId(ItemStack item) {\n\treturn new RtagItem(item).get("voucher");\n}\n\npublic boolean handleVoucher(Player player, ItemStack item) {\n\tfinal String id = getVoucherId(item);\n\tif (id == null || !vouchers.containsKey(id)) {\n\t\treturn false;\n\t}\n\tfor (String cmd : vouchers.get(id)) {\n\t\tBukkit.dispatchCommand(Bukkit.getConsoleSender(), cmd.replace("%player%", player.getName));\n\t}\n\treturn true;\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"conteo-de-n\xfamero",children:"Conteo de n\xfamero"}),"\n",(0,i.jsx)(t.p,{children:"Contar alg\xfan n\xfamero dentro del tag del item."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack addCount(ItemStack item, int amount) {\n\treturn RtagItem.edit(item, tag -> {\n\t\tint i = tag.getOptional("myplugin", "count").or(0);\n\t\ti = i + amount;\n\t\ttag.set(i, "myplugin", "count");\n\t});\n}\n\npublic int getCount(ItemStack item) {\n\treturn new RtagItem(item).getOptional("myplugin", "count").or(0);\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"due\xf1o-del-item",children:"Due\xf1o del item"}),"\n",(0,i.jsx)(t.p,{children:"Guardar informaci\xf3n sobre el due\xf1o del item en un tag custom."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack setOwner(ItemStack item, OfflinePlayer player) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(player.getName(), "owner", "name");\n\t\ttag.set(player.getUniqueId(), "owner", "uuid");\n\t});\n}\n\npublic String getOwnerName(ItemStack item) {\n\treturn new RtagItem(item).get("owner", "name");\n}\n\npublic UUID getOwnerUuid(ItemStack item) {\n\treturn new RtagItem(item).getOptional("owner", "uuid").asUuid();\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"interacciones",children:"Interacciones"}),"\n",(0,i.jsx)(t.p,{children:"Modificar las interacciones con el item utilizando data en NBT adem\xe1s de manejo de eventos."}),"\n",(0,i.jsx)(t.h3,{id:"guardar-item-al-morir",children:"Guardar item al morir"}),"\n",(0,i.jsxs)(t.p,{children:["Ahora hagamos un tag custom como ",(0,i.jsx)(t.code,{children:"keepItem"}),", que al ponerlo en ",(0,i.jsx)(t.code,{children:"true"})," se guarde el item al morir."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public ItemStack setKeepItem(ItemStack item, boolean value) {\n\treturn RtagItem.edit(item, tag -> {\n\t\ttag.set(value, "keepItem");\n\t});\n}\n\npublic boolean keepItem(ItemStack item) {\n\treturn new RtagItem(item).getOptional("keepItem").or(false);\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Y manejar los eventos ",(0,i.jsx)(t.code,{children:"PlayerDeathEvent"})," y ",(0,i.jsx)(t.code,{children:"PlayerRespawnEvent"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"private final Map<String, List<ItemStack>> savedItems = new HashMap<>();\n\n@EventHandler\npublic void onDeath(PlayerDeathEvent e) {\n\tif (e.getKeepInventory()) {\n\t\treturn;\n\t}\n\n\tList<ItemStack> matches = new ArrayList<>();\n\te.getDrops().forEach(item -> {\n\t    if (keepItem(item)) {\n\t        matches.add(item);\n\t    }\n\t});\n\n\tif (matches.isEmpty()) {\n\t\treturn;\n\t}\n\n\tString name = e.getEntity().getName();\n\tif (savedItems.containsKey(name)) {\n\t    savedItems.get(name).addAll(matches);\n\t} else {\n\t    savedItems.put(name, matches);\n\t}\n\n\te.getDrops().removeAll(matches);\n}\n\n@EventHandler\npublic void onRespawn(PlayerRespawnEvent e) {\n\tString name = e.getPlayer().getName();\n\tif (savedItems.containsKey(name)) {\n\t\te.getPlayer().getInventory().addItem(savedItems.get(name).toArray(new ItemStack[0]));\n\t\tsavedItems.remove(name);\n\t}\n}\n"})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var a=n(6540);const i={},r=a.createContext(i);function s(e){const t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);